id: gcs-ttl-trigger
namespace: io.kestra.tests

triggers:
  - id: watch
    type: io.kestra.plugin.gcp.gcs.Trigger
    from: "gs://{{ globals.bucket }}/tasks/gcp/upload/trigger/ttl/"
    interval: PT10S
    stateTtl: PT5S
    action: NONE
    on: CREATE_OR_UPDATE

tasks:
  - id: log
    type: io.kestra.plugin.core.log.Log
    message: "Triggered TTL test: {{ trigger.blobs | jq('.[].uri') }}"
